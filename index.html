<html>
<head>
  <title>Heather's Design Studio Website</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <!-- Stylesheet -->
  <link rel="stylesheet" type="text/css" href="css/style.css">
  <!-- JavaScript codes -->
  <script src="../js/jquery-1.9.0.min.js" type="text/javascript"></script>
  <script src="https://backpack.openbadges.org/issuer.js"></script>
  <link href='http://fonts.googleapis.com/css?family=Roboto:100,300,500' rel='stylesheet' type='text/css'>

</head>

<body>
<div id="container">

  <h1>Create/Issue/Claim Badges</h1>

  Info I need to have to issue:
    -badge image url, file upload?
    -issuer info: Full name, badge image url, badge info url
    -badge info: name of badge, badge description, badge image url (again?), badge criteria, tags (optional), issuer info link
    -specific badge data: uid, recipient email address (salted hash), badge image (AGAIN), evidence link, issue date, badge info url, verify info (self URL)
    -send post request to badge creator with assertion URL (php file) and receive back a PNG with assertion URL "baked" into it - user can add to backpack through lightboxed modal through API from assertion URL page


    Issuer Organization info
        required: Issuer Name, URL of Issuer Institution or personal page;
        optional: Issuer description, issuer image (logo), issuer email, revocation list

    Badge info:
        required: Badge/Achievement name, badge description, badge image URL, badge criteria URL, URL of json file for issuer info
        optional: alignment (standards alignment, list array: name of standard, url of official description, optional short description of standard), tags (array)

    Badge Assertion:
        required: unique id (locally unique), recipient (identity object array), badge info json URL, verification (verify object array), issue date
        optional: image (URL for PNG image, baked - don't do this, they're restricting it eventually), evidence (URL where evidence is stored), expiration date



    Badge Image (upload/url - MUST be png),


  <h2>Register to Issue</h2>

  <form id="regissuer" action="regissuer.php" method="post">
    <h3>Register as an Issuer</h3>
    <label>Issuer Name: </label><input type="text" id="issuername" name="issuername" />
    <label>Issuer URL: </label><input type="url" id="issuerurl" name="issuerurl" />
    <label>Issuer Description: </label><textarea rows="2" id="issuerdesc" name="issuerdesc"></textarea>
    <label>Issuer Email: </label><input type="email" id="issueremail" name="issueremail" />
    <label>Issuer Logo: </label><input type="file" id="issuerlogo" name="issuerlogo" />
    <input type="button" value="Register!" class="regissuer" />
  </form>


  <h2>Create a Badge</h2>

  - Badge Name
  - Badge Description
  - Badge Image
  - Badge Criteria URL
  - Badge Issuer URL
  - Badge Tags (optional)
  - Badge Alignment (optional)
    - Alignment Name
    - Alignment URL
    - Alignment Description (optional)
  - Issuer Name
  - Issuer URL
  - Issuer Description (optional)
  - Issuer Email Address (optional)
  - Issuer Image/Logo (optional)

  <form id="createbadge" action="" method="post">
    <h3>Create a Badge</h3>
    <label>Badge Name: </label><input type="text" id="badgename" name="badgename" />
    <label>Badge Description: </label><textarea rows="3" id="badgedesc" name="badgedesc"></textarea>
    <label>Badge Image: </label><input type="file" id="badgeimage" name="badgeimage" />
    <label>Badge Criteria URL: </label><input type="url" id="badgecriteria" name="badgecriteria" />
    <label>Badge Issuer: </label><select><option value="issuerinfo">Test Issuer</option></select>
    <input type="button" value="Create Badge!" class="create" />
  </form>


  <h2>Issue a Badge</h2>

  https://github.com/mozilla/openbadges/wiki/Assertions#assertion-specification

  - Choose badge from dropdown, or click "Create Badge"
  - Specify email of person to issue to
    - Click button to add additional email fields, upload excel file?

    <form id="issuebadge" action="writeassertion.php" method="post">
      <label>Issue Badge To (email address): </label><input type="email" name="emailaddress" />
      <input type="button" value="Issue Badge!" class="issue" />
    </form>

  <h2>Claim a Badge</h2>

  - Select badge from dropdown
    - If specific link w/badge in URL sent, badge is auto selected
  - Enter email address
  - Click "Claim this Badge"

  <form id="claimbadge" action="" method="post">
    <label>Enter Email Address to claim badge: </label><input type="email" name="emailaddress" />
    <input type="button" value="Claim Badge!" class="claim" />
  </form>

</div>

<script>

  $("input.regissuer").on("click",function() {
    console.log("regissuer click");
    $.post('regissuer.php', $("form#regissuer").serialize())
      .done( function(url) {
        console.log("Issuer URL: " + url);
    });
  });

  $("input.issue").on("click",function() {
    console.log("issue click");
    $.post('writeassertion.php', $("form#issuebadge").serialize())
      .done( function(url) {
        console.log("Assertion URL: " + url);
    });
  });

  $("input.claim").on("click",function() {
    console.log("claim click");
    OpenBadges.issue([url],function(errors, successes) {
      if (errors.length>0) {
        console.log("Badge Error:");
        console.log('%j',errors)
      }
      if (successes.length>0) {
        console.dir("Badge Succes:" + successes);
      }
    });
  })


</script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-38178749-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>